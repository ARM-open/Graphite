<html>
<head>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="http://code.jquery.com/jquery-2.2.0.min.js"></script>
    <script src="http://www.chartjs.org/dist/2.6.0/Chart.bundle.js"></script>
</head>
<body>
    <!-- SESSIONS LINE CHART-->
    <canvas id="sessions_line_chart" width="400" height="250"></canvas>
    <script>
        var sessionLabels = [];
        var sessionData = [];
        var i = 0;
        {% for sessions in daily_sessions %}
        if(i != 0 && i % 5 == 0){
            sessionLabels.push(i.toString());
        } else {
            sessionLabels.push("");
        }
        sessionData.push({{sessions}});
        i++;
        {% endfor %}
        var data = {
            labels: sessionLabels,
            datasets : [{
                label: "Number of Sessions",
                data: sessionData,
                fill: false,
                borderColor: "rgb(75, 192, 192)",
                backgroundColor: "rgb(75, 192, 192)"
            }]
        };
        var options = {
            responsive: false,
            scales: {
                xAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Number of Days'
                    }
                }],
                yAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Value'
                    }
                }]
            },
            elements: {
                point: {
                    radius: 0
                }
            }
        };
        var config = {
            type: 'line',
            data: data,
            options: options
        };
        var ctx = document.getElementById("sessions_line_chart").getContext("2d");
        var myLineChart = new Chart(ctx, config);
        </script>
        <!-- CHANNEL ENGAGEMENT BAR CHART-->
        <canvas id="channel_engagement" width="400" height="250"></canvas>
        <script>
            var channelLabels = [];
            var channelPageviews = [];
            var channelSessions = [];
            {% for values in engagement_session_channels %}
                {% for key, value in values.items() %}
                    channelLabels.push("{{key}}");
                    channelSessions.push({{value}});
                {% endfor %}
            {% endfor %}
            {% for values2 in engagement_pageview_channels %}
                {% for key, value in values2.items() %}
                    channelPageviews.push({{value}});
                {% endfor %}
            {% endfor %}
            var data = {
                labels: channelLabels,
                datasets: [
                    {
                        label: 'PageViews',
                        borderColor: "rgb(255, 80, 80)",
                        backgroundColor: "rgb(255, 80, 80)",
                        data: channelPageviews
                    },
                    {
                        label: 'Sessions',
                        borderColor: "rgb(75, 192, 192)",
                        backgroundColor: "rgb(75, 192, 192)",
                        data: channelSessions
                    }],
            };
            var options = {
                responsive: false,
                scales: {
                    xAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            };
            var config = {
                type: 'horizontalBar',
                data: data,
                options: options
            };
            var ctx = document.getElementById("channel_engagement").getContext("2d");
            var myBarChart = new Chart(ctx, config);
        </script>
        <!--DEVICE TYPE DISTRIBUTION DONUT CHART-->
        <canvas id="device_distribution" width="275" height="275"></canvas>
        <script>
            var deviceLabels = [];
            var deviceValues = [];
            {% for values in device_types %}
                {% for key, value in values.items() %}
                    deviceLabels.push("{{key}}");
                    deviceValues.push({{value}});
                {% endfor %}
            {% endfor %}
            var data = {
                labels: deviceLabels,
                datasets: [{
                    data: deviceValues,
                    backgroundColor: [
                        "rgb(75, 192, 192)",
                        "rgb(255, 80, 80)",
                        "rgb(82, 255, 82)",
                        "rgb(255, 82, 255)",
                        "rgb(82, 82, 255)",
                        "rgb(255, 255, 82)"
                    ]
                }]
            };
            var options = {
                responsive: false,
                cutoutPercentage: 70
            };
            var config = {
                type: 'doughnut',
                data: data,
                options: options
            };
            var ctx = document.getElementById("device_distribution").getContext("2d");
            var myPieChart = new Chart(ctx, config);
        </script>
        <!-- AVG SESSION LENGTH HORIZONTAL BAR CHAT -->
        <canvas id="session_length" width="275" height="275"></canvas>
        <script>
            var lengthLabels = [];
            var lengthValues = [];
            {% for values in session_duration %}
                {% for key, value in values.items() %}
                    lengthLabels.push("{{key}}");
                    lengthValues.push({{value}});
                {% endfor %}
            {% endfor %}
            var data = {
                labels: lengthLabels,
                datasets: [
                    {
                        label: "Avg. Session Length",
                        data: lengthValues,
                        backgroundColor: "rgb(75, 192, 192)",
                        borderColor: "rgb(75, 192, 192)"
                    }
                ]
            };
            var options = {
                responsive: false,
                scales: {
                    xAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            };
            var config = {
                type: 'horizontalBar',
                data: data,
                options: options
            };
            var ctx = document.getElementById("session_length").getContext("2d");
            var mySessionChart = new Chart(ctx, config);
        </script>
</body>